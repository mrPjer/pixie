\documentclass[times, utf8, seminar]{fer}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{csquotes}
\graphicspath{{slike/}}

\begin{document}

\title{Preporučiteljski sustav Pixie}

\author{Petar Šegina}

\voditelj{Klemo Vladimir}

\maketitle

\tableofcontents

\chapter{Uvod}

Preporučiteljski sustav je sustav čija je zadaća predvidjeti korisnikov odabir nekog izbora\footnote{\cite{mmd}}. Takvi sustavi čine veoma važnu značajku modernih mrežnih usluga, nudeći korisnicima zanimljiv, bitan i njima personaliziran sadržaj. Time također mogu i povećati interakciju korisnika sa sadržajem za kojeg potencijalno nije ni svjestan da postoji, a koji bi mu mogao biti od interesa. Tako jedan glazbeni web dućan može povećati prodaju preporučivanjem pjesama i albuma sličnima onima za koje je korisnik pokazao interes, dok jedan portal s vijestima može korisniku preporučiti slične i zanimljive vijesti kako bi ga duže zadržao na samom portalu i povećao prihod od prikaza reklama.

Pinterest\footnote{\url{https://pinterest.com}} je moderna web usluga koja svojim korisnicima omogućuje otkrivanje novih i relevantnih ideja za izradu kreativnih projekata -- od kuharskih recepata pa do dizajna interijera. Riječima njihovog inženjerskog tima:

\begin{displayquote}
		  At Pinterest, a primary engineering challenge is helping people discover and do things every day, which means serving the right idea to the right person at the right time.\footnote{\cite{medium-article}}
\end{displayquote}

Pinterest je u svojoj srži preporučiteljski sustav te je važno da kao takav može dati korisne preporuke u dovoljno kratkom vremenu kako bi svojim korisnicima ponudio što veću vrijednost. Zbog veličine podataka i vremenskih zahtjeva kojima Pinterest barata, a koje ćemo iznijeti u nastavku, postojeća rješenja pokazivala su značajne nedostatke te je Pinterest za svoje potrebe odlučio napraviti vlastiti preporučiteljski sustav, naziva Pixie, koji se pokazao izrazito učinkovitim. Nad njihovim skupom podataka -- bipartitnog grafa od 3 milijarde čvorova povezanih sa 17 milijardi bridova, jedan Pixie poslužitelj može poslužiti 1.200 zahtjeva po sekundi sa latencijom u 99-om centilu unutar 60 milisekundi. S poslovne strane se Pixie također pokazao kao uspjeh jer je povećao i relevantnost preporuka koje se korisnicima nude i time povećao angažman korisnika za do 50\%\footnote{\cite{DBLP:journals/corr/abs-1711-07601}}.

U nastavku dajemo pregled preporučiteljskog sustava Pixie -- problema kojeg on pokušava riješiti, predloženo rješenje, primjer ostvarenja te rezultate koje to ostvarenje daje. Također nudimo i opis vlastite implementacije osnovnih algoritama preporučiteljskog sustava u programskom jeziku Kotlin\footnote{\url{https://kotlinlang.org}} te pregled dobivenih rezultata navedenog rješenja nad simuliranim skupom podataka.

\chapter{Problem}

\section{Generalizirani model}
Opišimo prvo općeniti problem preporučivanja koji pokušavamo riješiti. Model kojeg iznosimo ovdje inspiriran je formalnim modelom iznesenim u \cite{avsp-recommender}.

Krenimo od sustava koji se sastoji od dva skupa -- skupa korisnika \textit{K} i skupa predmeta \textit{P} s kojima korisnik može međudjelovati. Dodatno, svaki korisnik može za neki predmet iskazati koliko mu je taj predmet zanimljiv, što možemo modelirati funkcijom zanimljivosti $z = K \times P \to \mathbb{R}$ koja za danog korisnika i dani predmet vraća koliko je tom korisniku taj predmet zanimljiv.

Ukoliko za danog korisnika sortiramo skup predmeta po funkciji zanimljivosti, dobivamo listu predmeta poredanih po zanimljivosti za tog korisnika $P_k = sorted(P, z_k)$. Temeljem ove liste korisniku možemo preporučiti novi sadržaj uzimajući, primjerice, prvih 5 elemenata te liste.

Ovakav jednostavan model pokazuje temeljni zahtjev od preporučiteljskog sustava -- da na temelju poznatih informacija o korisniku može za njega preporučiti relevantan sadržaj. 

No, postoje određeni izazovi kojih je važno biti svjestan. Prvo je nepoznavanje funkcije z -- korisnik će eksplicitno izraziti zanimljivost tek za veoma maleni podskup predmeta. Kako bi mogli ponuditi preporuke, morati ćemo zanimljivost za ostale predmete procijeniti. Drugi bitan izazov je veličina skupa podataka -- $K \times P$ može biti velikih dimenzija, reda veličine $10^6 \times 10^6$ pa nećemo moći naivno obraditi cijeli skup podataka, već će biti nužno usredotočiti se na tek maleni podskup istih.

Postoje razni pristupi rješavanju ovog problema, od čega su možda najpopularniji preporučivanje temeljeno na sadržaju te suradničko filtriranje, koji su također dostupni kao gotovi algoritmi u programskom okviru \textit{Apache Mahout}\footnote{\cite{rovkp-mahout}}.

\section{Pinterestov problem}

Pogledajmo sada problem preporučivanja kojeg Pinterest pokušava riješiti. Vidjet ćemo da se određena svojstva specifična njihovom problemu mogu iskoristiti za bolje i efikasnije generiranje preporuka.

\subsection{Problem preporučivanja}

U Pinterestovom skupu podataka postoje dva tipa entiteta - pin (\textit{pribadača, značka} i board (\textit{ploča}). Svaki pin može biti povezan s više boardova i svaki board može imati više pinova, tj.\ relacija među njima je oblika N-N.

Te podatke možemo prikazati grafom na način da čvorove predstavljaju pinovi i boardovi, a bridove veze među njima. Kako ne postoji veza pin-pin niti veza board-board, navedeni graf je bipartitan. Kako su veze također dvosmjerne, graf je i neusmjeren.

\begin{figure}[h]
	\centering
	\includegraphics[width=\textwidth]{pins_boards_graph}
	\caption{Graf podataka}
	\cite{medium-article}
	\label{fig:pins_boards}
\end{figure}

Kada korisnik posjeti pin ili board, želja nam je pokušati preporučiti relevantne pinove kako bi korisnik mogao nastaviti svoju potragu u svome smjeru. Tako od preporučiteljskog sustava želimo da nam za dani pin i dani graf nađe druge pinove koji će korisniku biti zanimljivi.

Dodatno, ne želimo preporuku stvoriti samo na temelju jednog pina, već više njih koje je korisnik posjetio, s time da veći naglasak želimo staviti na one pinove koje je korisnik posjetio nedavno. Konačno, kako bi još više poboljšali preporuke, veći naglasak želimo staviti na one pinove koji bi korisniku mogli biti zanimljivi po nekim drugim parametrima koji nisu očiti iz grafa -- kao što su jezik sadržaja ili tema oko koje je sadržaj grupiran.

\subsection{Razmjer podataka i vremenski zahtjevi}

Važno je također posebnu pažnju skrenuti i na razmjer podataka kojima Pinterest barata. U svome radu\footnote{\cite{DBLP:journals/corr/abs-1711-07601}} ističu kako njihov graf sadrži 7 milijardi čvorova i 100 milijardi bridova.

Također treba istaknuti i vremenske zahtjeve na preporučiteljski sustav -- Pinterestu je važno da se preporuke mogu generirati u stvarnom vremenu, kako korisnik koristi sustav. Zbog toga je važno da izračun preporuka bude brz te je već čekanje od jedne sekunde previše i znatno bi narušilo krajnje korisničko iskustvo.

S ovim svime na umu, vidimo jasnu motivaciju zašto napraviti vlastiti preporučiteljski sustav -- oblik i količina podataka te vremenski zahtjevi nisu prikladni za pristup poput suradničkog filtriranja čije je vrijeme osvježavanja znatno duže i čiji prostorni zahtjevi nisu prikladni za red veličine miljardi.

\chapter{Rješenje}

Kako bi riješili navedeni problem, u Pinterestu su primijenili nekoliko inovativnih tehnika koje iskorištavaju oblik podataka kako bi generirale brz i relevantan odgovor.

\section{Jednostavna nasumična šetnja}

\section{Dodavanje naklonosti nasumičnoj šetnji}

\section{Upiti sa više pinova i pripadnim težinama}

\section{Poticanje pinova koji se pojavljuju više puta}

\section{Rano zaustavljanje}

\section{Smanjivanje grafa}

\chapter{Ostvarenje}

\chapter{Rezultat}

\chapter{Zaključak}

\bibliography{literatura}
\bibliographystyle{fer}

\end{document}
